{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/dpi/Desktop/_Projects/_Dev/baitlist/app/api/fix-plan/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\n\n// Direct fix endpoint - bypasses auth check\nexport async function GET(req: NextRequest) {\n  const userId = req.nextUrl.searchParams.get('userId')\n  \n  if (!userId) {\n    return NextResponse.json({ error: 'userId required' }, { status: 400 })\n  }\n\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\n  if (!url || !serviceKey) {\n    return NextResponse.json({ \n      error: 'Missing env vars',\n      hasUrl: !!url,\n      hasServiceKey: !!serviceKey,\n    }, { status: 500 })\n  }\n\n  const supabase = createClient(url, serviceKey, {\n    auth: { persistSession: false, autoRefreshToken: false }\n  })\n\n  // First, check current state\n  const { data: before, error: readError } = await supabase\n    .from('user_profiles')\n    .select('*')\n    .eq('id', userId)\n    .single()\n\n  console.log('[fix-plan] Before:', before, readError)\n\n  if (readError) {\n    return NextResponse.json({ error: 'User not found', details: readError }, { status: 404 })\n  }\n\n  // Update to pro\n  const { data: after, error: updateError } = await supabase\n    .from('user_profiles')\n    .update({\n      plan_tier: 'pro',\n      signup_limit: 1000,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('id', userId)\n    .select()\n    .single()\n\n  console.log('[fix-plan] After:', after, updateError)\n\n  if (updateError) {\n    return NextResponse.json({ \n      error: 'Update failed', \n      details: updateError,\n      before \n    }, { status: 500 })\n  }\n\n  return NextResponse.json({\n    success: true,\n    before,\n    after,\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,GAAgB;IACxC,MAAM,SAAS,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAE5C,IAAI,CAAC,QAAQ;QACX,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,MAAM;IACN,MAAM,aAAa,QAAQ,GAAG,CAAC,yBAAyB;IAExD,IAAI,CAAC,OAAO,CAAC,YAAY;QACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,QAAQ,CAAC,CAAC;YACV,eAAe,CAAC,CAAC;QACnB,GAAG;YAAE,QAAQ;QAAI;IACnB;IAEA,MAAM,WAAW,IAAA,gMAAY,EAAC,KAAK,YAAY;QAC7C,MAAM;YAAE,gBAAgB;YAAO,kBAAkB;QAAM;IACzD;IAEA,6BAA6B;IAC7B,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAC9C,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;IAET,QAAQ,GAAG,CAAC,sBAAsB,QAAQ;IAE1C,IAAI,WAAW;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAAkB,SAAS;QAAU,GAAG;YAAE,QAAQ;QAAI;IAC1F;IAEA,gBAAgB;IAChB,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAC/C,IAAI,CAAC,iBACL,MAAM,CAAC;QACN,WAAW;QACX,cAAc;QACd,YAAY,IAAI,OAAO,WAAW;IACpC,GACC,EAAE,CAAC,MAAM,QACT,MAAM,GACN,MAAM;IAET,QAAQ,GAAG,CAAC,qBAAqB,OAAO;IAExC,IAAI,aAAa;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;YACP,SAAS;YACT;QACF,GAAG;YAAE,QAAQ;QAAI;IACnB;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT;QACA;IACF;AACF"}}]
}